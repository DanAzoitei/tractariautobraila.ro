<!doctype html>
<html lang="ro">
<head>
<script>
  // 1) dataLayer global
  window.dataLayer = window.dataLayer || [];
  function gtag(){ dataLayer.push(arguments); }

  // 2) CONSENT DEFAULT = denied (legal baseline pentru UE)
  gtag('consent', 'default', {
    'ad_storage': 'denied',
    'analytics_storage': 'denied',
    'ad_user_data': 'denied',
    'ad_personalization': 'denied'
  });

  // 3) Dacă userul a acceptat anterior, acordăm imediat consent = granted
  try {
    if (localStorage.getItem('cookieConsent') === 'granted') {
      gtag('consent', 'update', {
        'ad_storage': 'granted',
        'analytics_storage': 'granted',
        'ad_user_data': 'granted',
        'ad_personalization': 'granted'
      });
      // (opțional) un eveniment pentru debug
      dataLayer.push({event: 'consent_already_granted'});
    }
  } catch(e) {}
</script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T3JBRMFG');</script>
<!-- End Google Tag Manager -->

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Portofoliu — Tractări Auto Brăila</title>
  <meta name="description" content="Exemple reale de intervenții și transporturi auto în Brăila & Galați.">
  <link rel="stylesheet" href="/assets/css/styles.css">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon.png">
  <script defer src="/assets/js/main.js"></script>
</head>
<body>
	<!-- Google Tag Manager (noscript) -->
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T3JBRMFG"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->
  <div id="header-placeholder" data-active="portofoliu"></div>

  <main class="container">
    <h1>Portofoliu</h1>
    <p class="muted">Selectăm periodic lucrări recente din Facebook și din teren.</p>

    <div class="grid-portfolio big">
      <!-- Exemplu. Duplică și schimbă sursele -->
      <a href="/assets/img/portfolio/caz-05.jpg"><img loading="lazy" src="/assets/img/portfolio/caz-05.jpg" alt="Ridicare din șanț - DN2B"></a>
      <a href="/assets/img/portfolio/caz-06.jpg"><img loading="lazy" src="/assets/img/portfolio/caz-06.jpg" alt="Transport auto rulat - Brăila → Galați"></a>
      <a href="/assets/img/portfolio/caz-07.jpg"><img loading="lazy" src="/assets/img/portfolio/caz-07.jpg" alt="Tractare după pană - Centură"></a>
      <!-- ... -->
    </div>
  </main>

  <div id="footer-placeholder"></div>
  <div id="cookie-banner" class="cookie-banner" role="dialog" aria-live="polite" aria-label="Consimțământ cookie">
  <span>
    Folosim cookie-uri (ex. Google Analytics) pentru a îmbunătăți experiența. 
    Prin accept, ne permiți măsurarea traficului.
  </span>
  <div class="cookie-actions">
    <button id="cookie-accept" class="btn-accept">Accept</button>
    <button id="cookie-close" class="btn-close" aria-label="Închide">Mai târziu</button>
  </div>
</div>
<script>
(function(){
  const banner = document.getElementById('cookie-banner');
  const btnAccept = document.getElementById('cookie-accept');
  const btnClose = document.getElementById('cookie-close');

  // Afișează bannerul doar dacă nu există încă o decizie
  try {
    if (localStorage.getItem('cookieConsent') === 'granted' || localStorage.getItem('cookieConsent') === 'dismissed') {
      banner.style.display = 'none';
    }
  } catch(e){}

  btnAccept?.addEventListener('click', function(){
    // Persistă decizia
    try { localStorage.setItem('cookieConsent','granted'); } catch(e){}
    // Trimite update în Consent Mode (prin gtag -> dataLayer)
    if (typeof gtag === 'function') {
      gtag('consent', 'update', {
        'ad_storage': 'granted',
        'analytics_storage': 'granted',
        'ad_user_data': 'granted',
        'ad_personalization': 'granted'
      });
      // (opțional) eveniment pentru GTM/GA4 debug
      dataLayer.push({event:'consent_granted'});
    }
    banner.style.display = 'none';
  });

  // „Mai târziu” ascunde, dar nu acordă consent (rămâne denied)
  btnClose?.addEventListener('click', function(){
    try { localStorage.setItem('cookieConsent','dismissed'); } catch(e){}
    dataLayer.push({event:'consent_dismissed'});
    banner.style.display = 'none';
  });
})();
</script>

</body>
</html>
